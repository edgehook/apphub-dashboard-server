import{u as m,_ as f}from"./index-b6608134.js";import{bx as g,ew as _,bK as y,ex as u,d as h,p as S,bz as v,o as k,q as E,b8 as V,bM as b,f as w,e as x,bC as M,ey as W,ez as z,eA as C,eB as O}from"./.pnpm-ce7dda7b.js";const B=(r="javascript")=>{const a=m();let e=null,o=!1;const n=g(null),i=async()=>{await e?.getAction("monacoEditor.action.formatDocument")?.run()},d=t=>{y(async()=>{e?.setValue(t),o&&e?.updateOptions({readOnly:!1}),await i(),o&&e?.updateOptions({readOnly:!0})})},l=(t={})=>{if(!n.value)return;const s=u.createModel("",r);return o=!!t.readOnly,e=u.create(n.value,{model:s,minimap:{enabled:!1},roundedSelection:!0,theme:a.getDarkTheme?"vs-dark":"vs",multiCursorModifier:"ctrlCmd",scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8},lineNumbers:"off",tabSize:2,fontSize:16,autoIndent:"advanced",automaticLayout:!0,...t}),e};return _(()=>{e&&e.dispose()}),{el:n,updateVal:d,getEditor:()=>e,createEditor:l,onFormatDoc:i}},D=h({__name:"index",props:{width:{type:String,default:"100%"},height:{type:String,default:"90vh"},language:{type:String,default:"typescript"},preComment:{type:String,default:""},modelValue:{type:String,default:""},editorOptions:{type:Object,default:()=>({})}},emits:["blur","update:modelValue"],setup(r,{emit:a}){const e=r,{el:o,updateVal:n,getEditor:i,createEditor:d}=B(e.language),l=t=>{const{modelValue:s,preComment:c}=e,p=c?`${c}
${t||s}`:t||s;n(p)};return S(()=>{const t=d(e.editorOptions);t.onDidChangeModelContent(()=>{a("update:modelValue",t.getValue())}),t.onDidBlurEditorText(()=>{a("blur")}),l()}),v(()=>e.modelValue,t=>{t!==i()?.getValue()&&l(t)}),(t,s)=>(k(),E(M,null,[V("div",{ref_key:"el",ref:o,class:"go-editor-area",style:b({width:r.width,height:r.height})},null,4),w(x($))],64))}});const N=f(D,[["__scopeId","data-v-685236f8"]]),$={__name:"EditorWorker",setup(r){return self.MonacoEnvironment={getWorker(a,e){return e==="json"?new W:e==="typescript"||e==="javascript"?new z:e==="html"?new C:new O}},(a,e)=>null}};export{N as M};
