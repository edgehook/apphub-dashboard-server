import{v as we,j as E,k as R,l as N,m as B,_ as z,n as ye,p as w,s as Ce,__tla as be}from"./index-b6608134.js";import{d as y,o,q as u,bB as H,bL as L,e as a,bM as b,c as f,b9 as K,bN as P,bv as W,bC as V,bx as g,bg as _,p as U,b8 as p,w as S,ba as _e,bb as xe,bc as ke,bF as x,bO as Re,f as $,bH as X,bP as ze}from"./.pnpm-ce7dda7b.js";import{u as Le,f as Se,__tla as $e}from"./index-54633a7f.js";import{u as Y,a as Ie,b as Me,c as qe,d as Oe}from"./useLifeHandler.hook-55450486.js";import{u as k,C as Ge}from"./chartEditStore-0a96ea37.js";import{g as De}from"./screenApi-6aa52476.js";import"./plugin-744af617.js";import"./icon-7d63310d.js";import"./settingStore-07be61e1.js";let A,Fe=Promise.all([(()=>{try{return be}catch{}})(),(()=>{try{return $e}catch{}})()]).then(async()=>{const I=(e,s)=>({zIndex:s+1,left:`${e.x}px`,top:`${e.y}px`}),M=(e,s)=>({width:`${s?s*e.w:e.w}px`,height:`${s?s*e.h:e.h}px`}),q=e=>({display:e.hide?"none":"block"}),O=e=>{const s={};return e&&e.overFlowHidden&&(s.overflow="hidden"),s},Q=e=>{const s=e.selectColor?{background:e.background}:{background:`url(${e.backgroundImage}) center center / cover no-repeat !important`};return{position:"relative",width:e.width?`${e.width||100}px`:"100%",height:e.height?`${e.height}px`:"100%",...s}},C=k(),J=async()=>{const e=document.location.hash.split("/"),s=e&&e[e.length-1];let n={};return await De(s).then(t=>{if(t.code==200)try{let i=t.data.data;if(i)if(n=we(i)[0],t.data.state==1){const{editCanvasConfig:l,requestGlobalConfig:d,componentList:c}=n;C.editCanvasConfig=l,C.requestGlobalConfig=d,C.componentList=c,C.editCanvasConfig.projectName=t.data.name,n.isRelease=!0}else n.isRelease=!1}catch(i){console.error(i)}}),n},Z=y({__name:"index",props:{groupData:{type:Object,required:!0},themeSetting:{type:Object,required:!0},themeColor:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(e){return(s,n)=>(o(!0),u(V,null,H(e.groupData.groupList,t=>(o(),u("div",{class:L(["chart-item",a(E)(t.styles.animations)]),key:t.id,style:b({...a(I)(t.attr,e.groupIndex),...a(R)(t.styles),...a(N)(t.styles),...a(q)(t.status),...a(O)(t.preview),...a(B)(t.styles)})},[(o(),f(W(t.chartConfig.chartKey),K({id:t.id,chartConfig:t,themeSetting:e.themeSetting,themeColor:e.themeColor,style:{...a(M)(t.attr)}},P(a(Y)(t))),null,16,["id","chartConfig","themeSetting","themeColor","style"]))],6))),128))}}),ee=z(Z,[["__scopeId","data-v-a9bd405d"]]),m=e=>(xe("data-v-e592da9c"),e=e(),ke(),e),te={class:"screenClass"},ae={"data-v-05e4713a":"",t:"1612428295141",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5915","data-spm-anchor-id":"a313x.7781069.0.i5",width:"25",height:"25",class:"icon pointer",style:{}},se=m(()=>p("path",{"data-v-05e4713a":"",d:"M922.282667 178.005333v149.333334a25.6 25.6 0 0 1-51.2 0v-149.333334a22.442667 22.442667 0 0 0-22.4-22.4h-149.333334a25.6 25.6 0 1 1 0-51.2h149.333334a73.685333 73.685333 0 0 1 73.6 73.6zM325.802667 102.4h-149.333334a73.685333 73.685333 0 0 0-73.770666 73.6v149.333333a25.6 25.6 0 0 0 51.2 0v-149.333333a22.442667 22.442667 0 0 1 22.4-22.4h149.333333a25.6 25.6 0 1 0 0-51.2z m-1.024 766.037333h-149.333334a22.442667 22.442667 0 0 1-22.4-22.4v-149.333333a25.6 25.6 0 0 0-51.2 0v149.333333a73.685333 73.685333 0 0 0 73.6 73.6h149.333334a25.6 25.6 0 1 0 0-51.2z m570.88-195.498666a25.6 25.6 0 0 0-25.6 25.6v149.333333a22.442667 22.442667 0 0 1-22.4 22.4h-149.333334a25.6 25.6 0 1 0 0 51.2h149.333334a73.685333 73.685333 0 0 0 73.6-73.6v-149.333333a25.6 25.6 0 0 0-25.557334-25.642667z",fill:"#fafafc","p-id":"5916"},null,-1)),ie=[se],ne={"data-v-238b2b2e":"",t:"1612428267851",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5710",width:"21",height:"21",class:"icon pointer closeFileScreen",style:{}},oe=m(()=>p("path",{"data-v-238b2b2e":"",d:"M384 938.666667h42.666667v-341.333334H85.333333v42.666667h298.666667v298.666667z",fill:"#fafafc","p-id":"5711"},null,-1)),le=m(()=>p("path",{"data-v-238b2b2e":"",d:"M422.229333 631.466667l-302.037333 301.994666-29.866667-29.866666L392.362667 601.6zM640 426.666667h298.666667V384h-298.666667V85.333333h-42.666667v341.333334h42.666667z",fill:"#fafafc","p-id":"5712"},null,-1)),re=m(()=>p("path",{"data-v-238b2b2e":"",d:"M934.869333 119.68l-301.994666 301.994667-29.866667-29.866667 301.994667-302.037333zM426.24 426.666667V85.333333h-42.666667v298.666667h-298.666666v42.666667h341.333333z",fill:"#fafafc","p-id":"5713"},null,-1)),de=m(()=>p("path",{"data-v-238b2b2e":"",d:"M392.96 420.992L91.050667 118.997333l29.866666-29.866666L422.826667 391.125333zM640.426667 640.426667h298.666666v-42.666667h-341.333333v341.333333h42.666667v-298.666666z",fill:"#fafafc","p-id":"5714"},null,-1)),ce=m(()=>p("path",{"data-v-238b2b2e":"",d:"M905.472 935.552l-301.994667-301.994667 29.866667-29.866666 301.994667 301.994666z",fill:"#fafafc","p-id":"5715"},null,-1)),he=[oe,le,re,de,ce],ue=y({__name:"index",setup(e){const{initDataPond:s,clearMittDataPondMap:n}=Le(),t=k();let i=g(!1);const l=_(()=>t.editCanvasConfig.chartThemeSetting),d=_(()=>{const h=t.editCanvasConfig.chartThemeColor;return ye[h]}),c=()=>{i.value=!0,document.querySelector("html").requestFullscreen()},v=()=>{i.value=!1,document.exitFullscreen()};return n(),U(()=>{s(t.requestGlobalConfig)}),(h,me)=>{const T=_e("n-button");return o(),u("div",null,[p("div",te,[a(i)?(o(),f(T,{key:1,text:"",style:{"font-size":"24px"},onClick:v},{default:S(()=>[(o(),u("svg",ne,he))]),_:1})):(o(),f(T,{key:0,text:"",style:{"font-size":"24px"},onClick:c},{default:S(()=>[(o(),u("svg",ae,ie))]),_:1}))]),(o(!0),u(V,null,H(a(t).componentList,(r,j)=>(o(),u("div",{class:L(["chart-item",a(E)(r.styles.animations)]),key:r.id,style:b({...a(I)(r.attr,j),...a(R)(r.styles),...a(N)(r.styles),...a(q)(r.status),...a(O)(r.preview),...a(B)(r.styles)})},[r.isGroup?(o(),f(a(ee),{key:0,groupData:r,groupIndex:j,themeSetting:a(l),themeColor:a(d)},null,8,["groupData","groupIndex","themeSetting","themeColor"])):(o(),f(W(r.chartConfig.chartKey),K({key:1,id:r.id,chartConfig:r,themeSetting:a(l),themeColor:a(d),style:{...a(M)(r.attr)}},P(a(Y)(r))),null,16,["id","chartConfig","themeSetting","themeColor","style"]))],6))),128))])}}}),G=z(ue,[["__scopeId","data-v-e592da9c"]]),ve=e=>{const s=g(!1),n=setInterval(()=>{if(window.$vue.component){clearInterval(n);const t=i=>{window.$vue.component(i.chartConfig.chartKey)||window.$vue.component(i.chartConfig.chartKey,Se(i.chartConfig))};e.componentList.forEach(async i=>{i.isGroup?i.groupList.forEach(l=>{t(l)}):t(i)}),s.value=!0}},200);return{show:s}},pe=e=>{const s=g(),n=g(),t=g(e.editCanvasConfig.width),i=g(e.editCanvasConfig.height);return U(()=>{switch(e.editCanvasConfig.previewScaleType){case w.FIT:(()=>{const{calcRate:l,windowResize:d,unWindowResize:c}=Oe(t.value,i.value,n.value);l(),d(),x(()=>{c()})})();break;case w.SCROLL_Y:(()=>{const{calcRate:l,windowResize:d,unWindowResize:c}=qe(t.value,i.value,n.value,v=>{const h=s.value;h.style.width=`${t.value*v.width}px`,h.style.height=`${i.value*v.height}px`});l(),d(),x(()=>{c()})})();break;case w.SCROLL_X:(()=>{const{calcRate:l,windowResize:d,unWindowResize:c}=Me(t.value,i.value,n.value,v=>{const h=s.value;h.style.width=`${t.value*v.width}px`,h.style.height=`${i.value*v.height}px`});l(),d(),x(()=>{c()})})();break;case w.FULL:(()=>{const{calcRate:l,windowResize:d,unWindowResize:c}=Ie(t.value,i.value,n.value);l(),d(),x(()=>{c()})})();break}}),{entityRef:s,previewRef:n}},fe=e=>{const s=k();s.requestGlobalConfig=e[Ge.REQUEST_GLOBAL_CONFIG]},ge=y({__name:"suspenseIndex",async setup(e){let s,n;([s,n]=Re(()=>J()),s=await s,n(),s).isRelease===!1&&window.$message.error("\u9879\u76EE\u672A\u53D1\u5E03");const t=k();Ce(`${t.editCanvasConfig.projectName}`);const i=_(()=>({...Q(t.editCanvasConfig),...R(t.editCanvasConfig)})),l=_(()=>{const h=t.editCanvasConfig.previewScaleType;return h===w.SCROLL_Y||h===w.SCROLL_X});fe(t);const{entityRef:d,previewRef:c}=pe(t),{show:v}=ve(t);return(h,me)=>(o(),u("div",{class:L(`go-preview ${a(t).editCanvasConfig.previewScaleType}`)},[a(l)?(o(),u("div",{key:0,ref_key:"entityRef",ref:d,class:"go-preview-entity"},[p("div",{ref_key:"previewRef",ref:c,class:"go-preview-scale"},[a(v)?(o(),u("div",{key:0,style:b(a(i))},[$(a(G))],4)):X("",!0)],512)],512)):(o(),u("div",{key:1,ref_key:"previewRef",ref:c,class:"go-preview-scale"},[a(v)?(o(),u("div",{key:0,style:b(a(i))},[$(a(G))],4)):X("",!0)],512))],2))}});let D,F;D=z(ge,[["__scopeId","data-v-0b6ae688"]]),F=y({__name:"index",setup(e){return(s,n)=>(o(),f(ze,null,{default:S(()=>[$(D)]),_:1}))}}),A=y({__name:"wrapper",setup(e){let s=g(Date.now());return(n,t)=>(o(),f(F,{key:a(s)}))}})});export{Fe as __tla,A as default};
