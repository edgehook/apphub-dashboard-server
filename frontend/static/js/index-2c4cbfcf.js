import{d as V,ds as Y,bg as y,ba as h,b6 as re,b7 as ce,o as C,q as U,f as d,bL as E,e,bx as j,b8 as H,w as _,bA as z,c as G,bs as X,bC as Q,bB as Z,n as le,bz as ie,bH as ue,dt as de}from"./.pnpm-ce7dda7b.js";import{C as pe}from"./index-a6ee1110.js";import{L as $,u as me,C as J}from"./chartLayoutStore-1c1c2b2b.js";import{u as K}from"./chartEditStore-0a96ea37.js";import{u as ee,d as ge}from"./index-18fcb4c8.js";import{u as W,_ as R,h as _e,M as v,a0 as te,i as fe}from"./index-b6608134.js";import{a as he}from"./index-54633a7f.js";import{i as P}from"./icon-7d63310d.js";import"./plugin-744af617.js";import"./settingStore-07be61e1.js";import"./index.vue_vue_type_script_setup_true_lang-b36c4261.js";const ve={class:"icon-item-box"},ye=V({__name:"index",props:{isGroup:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},status:{type:Object,default:()=>({lock:!1,hide:!1})}},setup(a){const i=a;Y(m=>({efeb98bc:e(x)}));const{LockClosedOutlineIcon:k,LockOpenOutlineIcon:I,EyeOutlineIcon:T,EyeOffOutlineIcon:p}=P.ionicons5,f=K(),s=W(),x=y(()=>s.getAppTheme),M=m=>{m.stopPropagation(),i.status.hide?f.setShow():f.setHide()},D=m=>{m.stopPropagation(),i.status.lock?f.setUnLock():f.setLock()};return(m,b)=>{const L=h("n-icon");return re((C(),U("div",ve,[d(L,{class:E(["go-ml-1 icon-item",{active:a.status.lock}]),size:"15",component:a.status.lock?e(k):e(I),onClick:D},null,8,["class","component"]),d(L,{class:E(["go-ml-1 icon-item",{active:a.status.hide}]),size:"15",component:a.status.hide?e(p):e(T),onClick:M},null,8,["class","component"])],512)),[[ce,!a.isGroup]])}}});const oe=R(ye,[["__scopeId","data-v-637fb4e9"]]),Ce={class:"go-flex-center item-content"},xe={class:"list-text"},be=V({__name:"index",props:{componentData:{type:Object,required:!0},isGroup:{type:Boolean,default:!1},layerMode:{type:String,default:$.THUMBNAIL}},setup(a){const i=a;Y(m=>({"39f00375":e(f)}));const k=W(),I=K(),T=j("");(async()=>{T.value=await he(i.componentData.chartConfig)})();const f=y(()=>k.getAppTheme),s=y(()=>{const m=i.componentData.id;return I.getTargetChart.selectId.find(b=>b===m)}),x=y(()=>i.componentData.id===I.getTargetChart.hoverId),M=y(()=>i.componentData.status),D=y(()=>i.layerMode===$.TEXT);return(m,b)=>{const L=h("n-image"),O=h("n-ellipsis");return C(),U("div",{class:E(["go-content-layers-list-item",{hover:e(x),select:e(s),"list-mini":e(D)}])},[H("div",Ce,[d(L,{class:"list-img","object-fit":"contain","preview-disabled":"",src:T.value,"fallback-src":e(_e)()},null,8,["src","fallback-src"]),d(O,{style:{"margin-right":"auto"}},{default:_(()=>[H("span",xe,z(i.componentData.chartConfig.title),1)]),_:1}),d(e(oe),{isGroup:a.isGroup,hover:e(x),status:e(M)},null,8,["isGroup","hover","status"])]),H("div",{class:E({"select-modal":e(s)})},null,2)],2)}}});const ne=R(be,[["__scopeId","data-v-1327e47f"]]),Le={class:"go-content-layers-group-list-item"},Te={class:"go-flex-items-center item-content"},ke=V({__name:"index",props:{componentGroupData:{type:Object,required:!0},layerMode:{type:String,default:$.THUMBNAIL}},setup(a){const i=a;Y(u=>({e947bda8:e(M)})),v.UN_GROUP;const k=W(),{FolderIcon:I,FolderOpenIcon:T}=P.ionicons5,p=K(),{handleContextMenu:f,onClickOutSide:s}=ee(),x=j(!1),M=y(()=>k.getAppTheme),D=y(()=>i.layerMode===$.TEXT),m=y(()=>{const u=i.componentGroupData.id;return p.getTargetChart.selectId.find(o=>o===u)}),b=y(()=>i.componentGroupData.id===p.getTargetChart.hoverId),L=y(()=>i.componentGroupData.status),O=(u,o,t)=>{const r=n=>o.filter(c=>n.includes(c.key));if(p.getTargetChart.selectId.length>1)return r([v.GROUP]);{const n=[];return t.status.lock?n.push(v.LOCK):n.push(v.UNLOCK),t.status.hide?n.push(v.HIDE):n.push(v.SHOW),[...r([v.UN_GROUP]),ge(),...u.filter(c=>!n.includes(c.key))]}},q=u=>{window.$KeyboardActive?.ctrl||(x.value=!x.value,B(u,i.componentGroupData))},F=u=>{s();const o=i.componentGroupData.id;if(u.buttons===te.LEFT&&window.$KeyboardActive?.ctrl){if(p.targetChart.selectId.includes(o)){const t=p.targetChart.selectId.filter(r=>r!==o);p.setTargetSelectChart(t)}else p.setTargetSelectChart(o,!0);return}p.setTargetSelectChart(o)},B=(u,o,t)=>{u.preventDefault(),u.stopPropagation(),s(),p.setTargetSelectChart(t||o.id)},A=u=>{p.setTargetHoverChart(u.id)},N=u=>{p.setTargetHoverChart(void 0)};return(u,o)=>{const t=h("n-icon"),r=h("n-text"),n=h("n-ellipsis"),c=h("n-collapse-transition");return C(),U("div",Le,[H("div",{class:E(["root-item-content",{hover:e(b),select:e(m),"list-mini":e(D)}]),onClick:o[0]||(o[0]=l=>q(l)),onMousedown:o[1]||(o[1]=l=>F(l)),onMouseenter:o[2]||(o[2]=l=>A(a.componentGroupData)),onMouseleave:o[3]||(o[3]=l=>N(a.componentGroupData)),onContextmenu:o[4]||(o[4]=l=>e(f)(l,a.componentGroupData,O))},[H("div",Te,[d(t,{size:"20",class:"go-ml-1"},{default:_(()=>[x.value?(C(),G(e(T),{key:0})):(C(),G(e(I),{key:1}))]),_:1}),d(n,{style:{"margin-right":"auto"}},{default:_(()=>[d(r,{class:"go-ml-2 list-text",depth:2},{default:_(()=>[X(z(a.componentGroupData.chartConfig.title),1)]),_:1})]),_:1}),d(e(oe),{isGroup:!1,hover:e(b),status:e(L)},null,8,["hover","status"])]),H("div",{class:E({"select-modal":e(m)})},null,2)],34),d(c,{show:x.value},{default:_(()=>[(C(!0),U(Q,null,Z(a.componentGroupData.groupList,l=>(C(),G(e(ne),{key:l.id,componentData:l,"layer-mode":a.layerMode,isGroup:!0,onMousedown:S=>B(S,l,a.componentGroupData.id),onMouseenter:S=>A(l),onMouseleave:S=>N(),onContextmenu:o[5]||(o[5]=S=>e(f)(S,a.componentGroupData,O))},null,8,["componentData","layer-mode","onMousedown","onMouseenter","onMouseleave"]))),128))]),_:1},8,["show"])])}}});const Ie=R(ke,[["__scopeId","data-v-5806f416"]]),Me={class:"go-content-layer-box"},De=V({__name:"index",setup(a){const{t:i}=fe.global,{LayersIcon:k,GridIcon:I,ListIcon:T}=P.ionicons5,{LaptopIcon:p}=P.carbon,f=me(),s=K(),{handleContextMenu:x,onClickOutSide:M}=ee(),D=[{label:i("project.thumbnail"),icon:p,value:$.THUMBNAIL},{label:i("project.textList"),icon:T,value:$.TEXT}],m=j([]),b=j(f.getLayerType),L=y(()=>le(s.getComponentList).reverse());ie(()=>L.value,t=>{m.value=t});const O=(t,r,n)=>{if(s.getTargetChart.selectId.length>1)return t.filter(l=>l.key===v.GROUP);const c=[];return n.status.lock?c.push(v.LOCK):c.push(v.UNLOCK),n.status.hide?c.push(v.HIDE):c.push(v.SHOW),t.filter(l=>!c.includes(l.key))},q=()=>{f.setItem(J.LAYERS,!1)},F=t=>{const{oldIndex:r,newIndex:n}=t.moved;if(n-r>0){const c=s.getComponentList.splice(-(r+1),1)[0];s.getComponentList.splice(-n,0,c)}else{const c=s.getComponentList.splice(-(r+1),1)[0];n===0?s.getComponentList.push(c):s.getComponentList.splice(-n,0,c)}},B=t=>{const r=document.querySelector(".go-content-layer-box");t.target.contains(r)&&s.setTargetSelectChart()},A=(t,r)=>{M();const n=r.id;if(t.buttons===te.LEFT&&window.$KeyboardActive?.ctrl){if(s.targetChart.selectId.includes(n)){const c=s.targetChart.selectId.filter(l=>l!==n);s.setTargetSelectChart(c)}else s.setTargetSelectChart(n,!0);return}s.setTargetSelectChart(n)},N=t=>{s.setTargetHoverChart(t.id)},u=t=>{s.setTargetHoverChart(void 0)},o=t=>{b.value=t,f.setItem(J.LAYER_TYPE,t)};return(t,r)=>{const n=h("n-icon"),c=h("n-tooltip"),l=h("n-button"),S=h("n-button-group"),se=h("n-text"),ae=h("n-space");return C(),G(e(pe),{class:E(["go-content-layers",{scoped:!e(f).getLayers}]),title:t.$t("project.layers"),depth:2,onBack:q,onMousedown:r[1]||(r[1]=g=>B(g))},{icon:_(()=>[d(n,{size:"16",depth:2,component:e(k)},null,8,["component"])]),"top-right":_(()=>[d(S,{style:{display:"flex"}},{default:_(()=>[(C(),U(Q,null,Z(D,(g,w)=>d(l,{key:w,ghost:"",size:"small",type:b.value===g.value?"primary":"tertiary",onClick:Se=>o(g.value)},{default:_(()=>[d(c,{"show-arrow":!1,trigger:"hover"},{trigger:_(()=>[d(n,{size:"14",component:g.icon},null,8,["component"])]),default:_(()=>[X(" "+z(g.label),1)]),_:2},1024)]),_:2},1032,["type","onClick"])),64))]),_:1})]),default:_(()=>[e(L).length===0?(C(),G(ae,{key:0,justify:"center"},{default:_(()=>[d(se,{class:"not-layer-text"},{default:_(()=>[X(z(t.$t("project.nolayer")),1)]),_:1})]),_:1})):ue("",!0),d(e(de),{"item-key":"id",modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=g=>m.value=g),ghostClass:"ghost",onChange:F},{item:_(({element:g})=>[H("div",Me,[g.isGroup?(C(),G(e(Ie),{key:0,componentGroupData:g,"layer-mode":b.value},null,8,["componentGroupData","layer-mode"])):(C(),G(e(ne),{key:1,componentData:g,"layer-mode":b.value,onMousedown:w=>A(w,g),onMouseenter:w=>N(g),onMouseleave:w=>u(),onContextmenu:w=>e(x)(w,g,O)},null,8,["componentData","layer-mode","onMousedown","onMouseenter","onMouseleave","onContextmenu"]))])]),_:1},8,["modelValue"])]),_:1},8,["class","title"])}}});const ze=R(De,[["__scopeId","data-v-4edc2815"]]);export{ze as default};
