import{j as z,k as C,l as q,m as D,_,n as V,p as h,s as Z,__tla as ee}from"./index-b6608134.js";import{d as v,o as l,q as p,bB as T,bL as b,e as a,bM as y,c as f,b9 as j,bN as G,bv as F,bC as E,bg as m,p as K,bx as g,bF as w,bO as te,b8 as ae,f as S,bH as N,w as oe,bP as ne}from"./.pnpm-ce7dda7b.js";import{u as se,f as ie,__tla as re}from"./index-54633a7f.js";import{u as P,a as le,b as ce,c as de,d as ue}from"./useLifeHandler.hook-55450486.js";import{g as pe}from"./storage-7eeb2676.js";import{u as W,C as he}from"./chartEditStore-0a96ea37.js";import"./plugin-744af617.js";import"./icon-7d63310d.js";import"./screenApi-6aa52476.js";import"./settingStore-07be61e1.js";let M,ge=Promise.all([(()=>{try{return ee}catch{}})(),(()=>{try{return re}catch{}})()]).then(async()=>{const R=(e,o)=>({zIndex:o+1,left:`${e.x}px`,top:`${e.y}px`}),I=(e,o)=>({width:`${o?o*e.w:e.w}px`,height:`${o?o*e.h:e.h}px`}),k=e=>({display:e.hide?"none":"block"}),x=e=>{const o={};return e&&e.overFlowHidden&&(o.overflow="hidden"),o},B=e=>{const o=e.selectColor?{background:e.background}:{background:`url(${e.backgroundImage}) center center / cover no-repeat !important`};return{position:"relative",width:e.width?`${e.width||100}px`:"100%",height:e.height?`${e.height}px`:"100%",...o}},H=v({__name:"index",props:{groupData:{type:Object,required:!0},themeSetting:{type:Object,required:!0},themeColor:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(e){return(o,i)=>(l(!0),p(E,null,T(e.groupData.groupList,t=>(l(),p("div",{class:b(["chart-item",a(z)(t.styles.animations)]),key:t.id,style:y({...a(R)(t.attr,e.groupIndex),...a(C)(t.styles),...a(q)(t.styles),...a(k)(t.status),...a(x)(t.preview),...a(D)(t.styles)})},[(l(),f(F(t.chartConfig.chartKey),j({id:t.id,chartConfig:t,themeSetting:e.themeSetting,themeColor:e.themeColor,style:{...a(I)(t.attr)}},G(a(P)(t))),null,16,["id","chartConfig","themeSetting","themeColor","style"]))],6))),128))}}),U=_(H,[["__scopeId","data-v-214bf203"]]),X=v({__name:"index",props:{localStorageInfo:{type:Object,required:!0}},setup(e){const o=e,{initDataPond:i,clearMittDataPondMap:t}=se(),s=m(()=>o.localStorageInfo.editCanvasConfig.chartThemeSetting),r=m(()=>{const c=o.localStorageInfo.editCanvasConfig.chartThemeColor;return V[c]});return t(),K(()=>{i(o.localStorageInfo.requestGlobalConfig)}),(c,u)=>(l(!0),p(E,null,T(e.localStorageInfo.componentList,(n,d)=>(l(),p("div",{class:b(["chart-item",a(z)(n.styles.animations)]),key:n.id,style:y({...a(R)(n.attr,d),...a(C)(n.styles),...a(q)(n.styles),...a(k)(n.status),...a(x)(n.preview),...a(D)(n.styles)})},[n.isGroup?(l(),f(a(U),{key:0,groupData:n,groupIndex:d,themeSetting:a(s),themeColor:a(r)},null,8,["groupData","groupIndex","themeSetting","themeColor"])):(l(),f(F(n.chartConfig.chartKey),j({key:1,id:n.id,chartConfig:n,themeSetting:a(s),themeColor:a(r),style:{...a(I)(n.attr)}},G(a(P)(n))),null,16,["id","chartConfig","themeSetting","themeColor","style"]))],6))),128))}}),L=_(X,[["__scopeId","data-v-4f053805"]]),Y=e=>{const o=g(!1),i=setInterval(()=>{if(window.$vue.component){clearInterval(i);const t=s=>{window.$vue.component(s.chartConfig.chartKey)||window.$vue.component(s.chartConfig.chartKey,ie(s.chartConfig))};e.componentList.forEach(async s=>{s.isGroup?s.groupList.forEach(r=>{t(r)}):t(s)}),o.value=!0}},200);return{show:o}},A=e=>{const o=g(),i=g(),t=g(e.editCanvasConfig.width),s=g(e.editCanvasConfig.height);return K(()=>{switch(e.editCanvasConfig.previewScaleType){case h.FIT:(()=>{const{calcRate:r,windowResize:c,unWindowResize:u}=ue(t.value,s.value,i.value);r(),c(),w(()=>{u()})})();break;case h.SCROLL_Y:(()=>{const{calcRate:r,windowResize:c,unWindowResize:u}=de(t.value,s.value,i.value,n=>{const d=o.value;d.style.width=`${t.value*n.width}px`,d.style.height=`${s.value*n.height}px`});r(),c(),w(()=>{u()})})();break;case h.SCROLL_X:(()=>{const{calcRate:r,windowResize:c,unWindowResize:u}=ce(t.value,s.value,i.value,n=>{const d=o.value;d.style.width=`${t.value*n.width}px`,d.style.height=`${s.value*n.height}px`});r(),c(),w(()=>{u()})})();break;case h.FULL:(()=>{const{calcRate:r,windowResize:c,unWindowResize:u}=le(t.value,s.value,i.value);r(),c(),w(()=>{u()})})();break}}),{entityRef:o,previewRef:i}},Q=e=>{const o=W();o.requestGlobalConfig=e[he.REQUEST_GLOBAL_CONFIG]},J=v({__name:"suspenseIndex",async setup(e){let o,i;[o,i]=te(()=>pe()),await o,i();const t=W();Z(`\u9884\u89C8-${t.editCanvasConfig.projectName}`);const s=m(()=>({...B(t.editCanvasConfig),...C(t.editCanvasConfig)})),r=m(()=>{const d=t.editCanvasConfig.previewScaleType;return d===h.SCROLL_Y||d===h.SCROLL_X});Q(t);const{entityRef:c,previewRef:u}=A(t),{show:n}=Y(t);return(d,ve)=>(l(),p("div",{class:b(`go-preview ${a(t).editCanvasConfig.previewScaleType}`)},[a(r)?(l(),p("div",{key:0,ref_key:"entityRef",ref:c,class:"go-preview-entity"},[ae("div",{ref_key:"previewRef",ref:u,class:"go-preview-scale"},[a(n)?(l(),p("div",{key:0,style:y(a(s))},[S(a(L),{localStorageInfo:a(t)},null,8,["localStorageInfo"])],4)):N("",!0)],512)],512)):(l(),p("div",{key:1,ref_key:"previewRef",ref:u,class:"go-preview-scale"},[a(n)?(l(),p("div",{key:0,style:y(a(s))},[S(a(L),{localStorageInfo:a(t)},null,8,["localStorageInfo"])],4)):N("",!0)],512))],2))}});let $,O;$=_(J,[["__scopeId","data-v-26cbe583"]]),O=v({__name:"index",setup(e){return(o,i)=>(l(),f(ne,null,{default:oe(()=>[S($)]),_:1}))}}),M=v({__name:"wrapper",setup(e){let o=g(Date.now());return(i,t)=>(l(),f(O,{key:a(o)}))}})});export{ge as __tla,M as default};
