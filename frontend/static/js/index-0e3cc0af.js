import{M as T,al as Y,am as K,an as Ze,ak as _t,v as Ke,ao as X,a0 as Ue,u as ye,_ as le,n as lt,j as Xe,k as Le,l as Be,m as ct,ap as gt,aq as Qe,J as vt,C as et,S as Oe,i as mt}from"./index-b6608134.js";import{p as Ge,bF as it,eE as W,t as V,bR as Ie,dO as Re,bJ as Ct,d as ne,ds as we,bg as $,o as w,q as I,r as We,bC as de,bB as ge,bL as ie,bM as Z,e as t,bH as he,b8 as D,c as M,w as S,bv as ve,bD as De,n as tt,bz as ue,ba as R,bf as Ae,bx as B,bb as Fe,bc as ze,f as b,eF as ot,bA as se,bs as fe,eG as yt,bK as wt,bt as ut,b6 as Pe,b7 as Ye,dq as St}from"./.pnpm-ce7dda7b.js";import{u as qe,d as Tt}from"./index-18fcb4c8.js";import{u as oe,d as te}from"./chartEditStore-0a96ea37.js";import{d as xt,s as st}from"./index-54633a7f.js";import{a as bt,b as nt,l as Et,g as kt}from"./plugin-744af617.js";import{C as Lt}from"./index-a6ee1110.js";import{u as je,S as pe,T as $e}from"./settingStore-07be61e1.js";import{u as Rt,C as $t}from"./chartLayoutStore-1c1c2b2b.js";import{i as Se}from"./icon-7d63310d.js";import{d as Mt,r as Dt}from"./file-6db2fad1.js";import{u as dt}from"./index-0d25db4b.js";import"./index.vue_vue_type_script_setup_true_lang-b36c4261.js";import"./screenApi-6aa52476.js";const me=oe(),At=()=>{Ge(()=>{me.setEditCanvas(te.EDIT_LAYOUT_DOM,document.getElementById("go-chart-edit-layout")),me.setEditCanvas(te.EDIT_CONTENT_DOM,document.getElementById("go-chart-edit-content"));const e=me.listenerScale();it(()=>{me.setEditCanvas(te.EDIT_LAYOUT_DOM,null),me.setEditCanvas(te.EDIT_CONTENT_DOM,null),e()})})},F=oe(),J=e=>`${Y.CTRL}+${e}`,Ee=e=>`${Y.SHIFT}+${e}`,N={[T.ARROW_UP]:J("up"),[T.ARROW_RIGHT]:J("right"),[T.ARROW_DOWN]:J("down"),[T.ARROW_LEFT]:J("left"),[T.COPY]:J("c"),[T.CUT]:J("x"),[T.PARSE]:J("v"),[T.DELETE]:"delete",[T.BACK]:J("z"),[T.FORWORD]:J(Ee("z")),[T.GROUP]:J("g"),[T.UN_GROUP]:J(Ee("g")),[T.LOCK]:J("l"),[T.UNLOCK]:J(Ee("l")),[T.HIDE]:J("h"),[T.SHOW]:J(Ee("h"))},z=e=>`${K.CTRL}+${e}`,ke=e=>`${K.SHIFT}+${e}`,G={[T.ARROW_UP]:z("arrowup"),[T.ARROW_RIGHT]:z("arrowright"),[T.ARROW_DOWN]:z("arrowdown"),[T.ARROW_LEFT]:z("arrowleft"),[T.COPY]:z("c"),[T.CUT]:z("x"),[T.PARSE]:z("v"),[T.DELETE]:z("backspace"),[T.BACK]:z("z"),[T.FORWORD]:z(ke("z")),[T.GROUP]:z("g"),[T.UN_GROUP]:z(ke("g")),[T.LOCK]:z("l"),[T.UNLOCK]:z(ke("l")),[T.HIDE]:z("h"),[T.SHOW]:z(ke("h"))},Ht=[N.up,N.right,N.down,N.left,N.delete,N.copy,N.cut,N.parse,N.back,N.forward,N.group,N.unGroup,N.lock,N.unLock,N.hide,N.show],Ut=[G.up,G.right,G.down,G.left,G.delete,G.copy,G.cut,G.parse,G.back,G.forward,G.group,G.unGroup,G.lock,G.unLock,G.hide,G.show],Ot=()=>{window.$KeyboardActive={ctrl:!1,space:!1},document.onkeydown=e=>{const{keyCode:r}=e;if(r==32&&e.target==document.body&&e.preventDefault(),[17,32].includes(r)&&window.$KeyboardActive)switch(Ze(e.keyCode),r){case 17:window.$KeyboardActive.ctrl=!0;break;case 32:window.$KeyboardActive.space=!0;break}},document.onkeyup=e=>{const{keyCode:r}=e;if(r==32&&e.target==document.body&&e.preventDefault(),[17,32].includes(r)&&window.$KeyboardActive)switch(Ze(),r){case 17:window.$KeyboardActive.ctrl=!1;break;case 32:window.$KeyboardActive.space=!1;break}}},It=()=>{const r=(n,c)=>{switch(c){case n.up:W(c,V(()=>(F.setMove(T.ARROW_UP),!1),50));break;case n.right:W(c,V(()=>(F.setMove(T.ARROW_RIGHT),!1),50));break;case n.down:W(c,V(()=>(F.setMove(T.ARROW_DOWN),!1),50));break;case n.left:W(c,V(()=>(F.setMove(T.ARROW_LEFT),!1),50));break;case n.delete:W(c,Ie(()=>(F.removeComponentList(),!1),50));break;case n.copy:W(c,Ie(()=>(F.setCopy(),!1),50));break;case n.cut:W(c,Ie(()=>(F.setCut(),!1),50));break;case n.parse:W(c,V(()=>(F.setParse(),!1),50));break;case n.back:W(c,V(()=>(F.setBack(),!1),50));break;case n.forward:W(c,V(()=>(F.setForward(),!1),50));break;case n.group:W(c,V(()=>(F.setGroup(),!1),50));break;case n.unGroup:W(c,V(()=>(F.setUnGroup(),!1),50));break;case n.lock:W(c,V(()=>(F.setLock(),!1),50));break;case n.unLock:W(c,V(()=>(F.setUnLock(),!1),50));break;case n.hide:W(c,V(()=>(F.setHide(),!1),50));break;case n.show:W(c,V(()=>(F.setShow(),!1),50));break}};Ht.forEach(n=>{r(N,n)}),Ut.forEach(n=>{r(G,n)}),Ot()},C=oe(),{onClickOutSide:Pt}=qe(),Yt=async e=>{e.preventDefault();try{bt();const r=e.dataTransfer.getData(_t.DRAG_KEY);if(!r){nt();return}C.setEditCanvas(te.IS_CREATE,!1);const n=Ke(r);let c=await xt(n);n.redirectComponent&&(n.dataset&&(c.option.dataset=n.dataset),c.chartConfig.title=n.title,c.chartConfig.chartFrame=n.chartFrame),X(c,e.offsetX-c.attr.w/2,e.offsetY-c.attr.h/2),C.addComponentList(c,!1,!0),C.setTargetSelectChart(c.id),nt()}catch(r){Et(),console.error(r),window.$message.warning("å›¾è¡¨æ­£åœ¨ç ”å‘ä¸­, æ•¬è¯·æœŸå¾…...")}},at=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")},pt=(e,r)=>{if(r){C.setTargetSelectChart(r.id);return}C.setTargetSelectChart(void 0)},Kt=(e,r)=>{if(e.which==2||window.$KeyboardActive?.space)return;pt();const n=e.offsetX,c=e.offsetY,s=e.screenX,u=e.screenY,d=C.getEditCanvas.scale;C.setMousePosition(void 0,void 0,n,c);const f=Re.throttle(i=>{C.setTargetSelectChart(),C.setEditCanvas(te.IS_SELECT,!0);const y=n+i.screenX-s,a=c+i.screenY-u;C.setMousePosition(y,a);const o={x1:0,y1:0,x2:0,y2:0};y>n&&a>c?(o.x1=n,o.y1=c,o.x2=Math.round(n+(i.screenX-s)/d),o.y2=Math.round(c+(i.screenY-u)/d)):y>n&&a<c?(o.x1=n,o.y1=Math.round(c-(u-i.screenY)/d),o.x2=Math.round(n+(i.screenX-s)/d),o.y2=c):y<n&&a>c?(o.x1=Math.round(n-(s-i.screenX)/d),o.y1=c,o.x2=n,o.y2=Math.round(c+(i.screenY-u)/d)):(o.x1=Math.round(n-(s-i.screenX)/d),o.y1=Math.round(c-(u-i.screenY)/d),o.x2=n,o.y2=c),C.getComponentList.forEach(h=>{if(!C.getTargetChart.selectId.includes(h.id)){const{x:l,y:_,w:g,h:O}=h.attr,x={x1:l,y1:_,x2:l+g,y2:_+O};x.x1-o.x1>=0&&x.y1-o.y1>=0&&x.x2-o.x2<=0&&x.y2-o.y2<=0&&!h.status.lock&&!h.status.hide&&C.setTargetSelectChart(h.id,!0)}})},30),p=()=>{f.cancel(),C.setEditCanvas(te.IS_SELECT,!1),C.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",f),document.addEventListener("mouseup",p)},ht=()=>({mouseClickHandle:(s,u)=>{s.preventDefault(),s.stopPropagation();let f=s.target.getAttribute("drag");if(!(u.status.lock||f=="false")&&window.$KeyboardActive?.ctrl)if(C.targetChart.selectId.includes(u.id)){const p=C.targetChart.selectId.filter(i=>i!==u.id);C.setTargetSelectChart(p)}else C.setTargetSelectChart(u.id,!0)},mousedownHandle:(s,u)=>{s.preventDefault(),s.stopPropagation();let f=s.target.getAttribute("drag");if(u.status.lock||f=="false"||(Pt(),s.buttons===Ue.LEFT&&window.$KeyboardActive?.ctrl))return;const p=C.getTargetChart.selectId;if(s.buttons===Ue.RIGHT&&p.length>1&&p.includes(u.id)||(C.setTargetSelectChart(u.id),s.buttons===Ue.RIGHT))return;const i=C.getEditCanvas.scale,y=C.getEditCanvasConfig.width,a=C.getEditCanvasConfig.height,o=new Map;C.getTargetChart.selectId.forEach(x=>{const P=C.fetchTargetIndex(x);if(P!==-1){const{x:L,y:H,w:U,h:q}=Ct(C.getComponentList[P]).attr;o.set(x,{x:L,y:H,w:U,h:q})}});const h=s.screenX,l=s.screenY;let _=[];C.getTargetChart.selectId.forEach(x=>{if(!o.has(x))return;const P=C.fetchTargetIndex(x);_.push(Re.cloneDeep(C.getComponentList[P]))}),C.setMousePosition(void 0,void 0,h,l);const g=Re.throttle(x=>{C.setEditCanvas(te.IS_DRAG,!0),C.setMousePosition(x.screenX,x.screenY);let P=(x.screenX-h)/i,L=(x.screenY-l)/i;C.getTargetChart.selectId.forEach(H=>{if(!o.has(H))return;const U=C.fetchTargetIndex(H),{x:q,y:k,w:m,h:Q}=o.get(H),ce=C.getComponentList[U];let v=Math.round(q+P),E=Math.round(k+L);const A=50;v=v<-m+A?-m+A:v,E=E<-Q+A?-Q+A:E,v=v>y-A?y-A:v,E=E>a-A?a-A:E,ce&&(ce.attr=Object.assign(ce.attr,{x:v,y:E}))})},20),O=()=>{try{C.setMousePosition(0,0,0,0),C.setEditCanvas(te.IS_DRAG,!1),_.length&&(C.getTargetChart.selectId.forEach(x=>{if(!o.has(x))return;const P=C.fetchTargetIndex(x),L=C.getComponentList[P];_.forEach(H=>{H.id===x&&(H.attr=Object.assign(H.attr,{offsetX:L.attr.x-H.attr.x,offsetY:L.attr.y-H.attr.y}))})}),C.moveComponentList(_)),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",O)}catch(x){console.log(x)}};document.addEventListener("mousemove",g),document.addEventListener("mouseup",O)},mouseenterHandle:(s,u)=>{s.preventDefault(),s.stopPropagation(),C.getEditCanvas.isSelect||C.setTargetHoverChart(u.id)},mouseleaveHandle:(s,u)=>{s.preventDefault(),s.stopPropagation(),C.setEditCanvas(te.IS_DRAG,!1),C.setTargetHoverChart(void 0)}}),Xt=(e,r,n)=>{e.stopPropagation(),e.preventDefault(),C.setEditCanvas(te.IS_DRAG,!0);const c=C.getEditCanvas.scale,s=n.x,u=n.y,d=n.w,f=n.h,p=e.screenX,i=e.screenY;C.setMousePosition(p,i);const y=Re.throttle(o=>{C.setMousePosition(o.screenX,o.screenY);let h=Math.round((o.screenX-p)/c),l=Math.round((o.screenY-i)/c);const _=/t/.test(r),g=/b/.test(r),O=/l/.test(r),x=/r/.test(r),P=f+(_?-l:g?l:0),L=d+(O?-h:x?h:0);n.h=P>0?P:0,n.w=L>0?L:0,n.x=s+(O?h:0),n.y=u+(_?l:0)},50),a=()=>{C.setEditCanvas(te.IS_DRAG,!1),C.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",a)},Me=(e,r)=>e?{zIndex:r+1,left:`${e.x}px`,top:`${e.y}px`}:{},_e=(e,r)=>e?{width:`${r?r*e.w:e.w}px`,height:`${r?r*e.h:e.h}px`}:{},Bt=(e,r,n,c)=>{const{w:s,h:u}=n,d=/t/.test(e),f=/b/.test(e),p=/l/.test(e),i=/r/.test(e);let y=0,a=0;return e.length===2?(y=p?0:s,a=d?0:u):((d||f)&&(y=s/2,a=d?0:u),(p||i)&&(y=p?0:s,a=Math.floor(u/2))),{left:`${y}px`,top:`${a}px`,cursor:c[r]+"-resize"}},Nt=["onMousedown"],Gt=ne({__name:"index",props:{item:{type:Object,required:!0},hiddenPoint:{type:Boolean,required:!1}},setup(e){const r=e;we(o=>({"7f2714d3":t(d)}));const n=ye(),c=oe(),s=["t","r","b","l","lt","rt","lb","rb"],u=["n","e","s","w","nw","ne","sw","se"],d=$(()=>n.getAppTheme),f=$(()=>r.item.status.lock?!1:r.item.id===c.getTargetChart.hoverId),p=$(()=>{const o=r.item.id;return r.item.status.lock?!1:c.getTargetChart.selectId.find(h=>h===o)}),i=$(()=>r.item.status.lock),y=$(()=>r.item.status.hide),a=$(()=>!(r.item.chartConfig.chartKey=="VIHLine"||r.item.chartConfig.chartKey=="VIFHLine"));return(o,h)=>(w(),I("div",{class:ie(["go-shape-box",{lock:t(i),hide:t(y),zIndex:!t(a)}])},[We(o.$slots,"default",{},void 0,!0),e.hiddenPoint?he("",!0):(w(!0),I(de,{key:0},ge(t(p)?s:[],(l,_)=>(w(),I("div",{class:ie(`shape-point ${l}`),key:_,style:Z(t(Bt)(l,_,e.item.attr,u)),onMousedown:g=>t(Xt)(g,l,e.item.attr)},null,46,Nt))),128)),D("div",{class:ie(["shape-modal",{zIndex:!t(a)}]),style:Z(t(_e)(e.item.attr))},[D("div",{class:ie(["shape-modal-select",{active:t(p)}])},null,2),D("div",{class:ie(["shape-modal-change",{selectActive:t(p),hoverActive:t(f)}])},null,2)],6)],2))}});const Ne=le(Gt,[["__scopeId","data-v-76cd8b70"]]),Wt={class:"go-edit-group-box"},Ft=ne({__name:"index",props:{groupData:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(e){const r=oe(),{handleContextMenu:n}=qe(),{mouseenterHandle:c,mouseleaveHandle:s,mousedownHandle:u,mouseClickHandle:d}=ht(),f=(y,a,o)=>{const h=l=>a.filter(_=>l.includes(_.key));if(r.getTargetChart.selectId.length>1)return h([T.GROUP,T.DELETE]);{const l=[];o.status.lock?l.push(T.LOCK):l.push(T.UNLOCK),o.status.hide?l.push(T.HIDE):l.push(T.SHOW);const _=[T.UN_GROUP];return[...h(_),Tt(),...y.filter(g=>!l.includes(g.key))]}},p=$(()=>{const y=r.getEditCanvasConfig.chartThemeColor;return lt[y]}),i=$(()=>r.getEditCanvasConfig.chartThemeSetting);return(y,a)=>(w(),I("div",Wt,[(w(),M(t(Ne),{key:e.groupData.id,"data-id":e.groupData.id,index:e.groupIndex,item:e.groupData,hiddenPoint:!0,class:ie(t(Xe)(e.groupData.styles.animations)),style:Z({...t(Me)(e.groupData.attr,e.groupIndex),...t(_e)(e.groupData.attr),...t(Le)(e.groupData.styles),...t(Be)(e.groupData.styles),...t(ct)(e.groupData.styles)}),onClick:a[0]||(a[0]=o=>t(d)(o,e.groupData)),onMousedown:a[1]||(a[1]=o=>t(u)(o,e.groupData)),onMouseenter:a[2]||(a[2]=o=>t(c)(o,e.groupData)),onMouseleave:a[3]||(a[3]=o=>t(s)(o,e.groupData)),onContextmenu:a[4]||(a[4]=o=>t(n)(o,e.groupData,f))},{default:S(()=>[(w(!0),I(de,null,ge(e.groupData.groupList,o=>(w(),M(t(Ne),{key:o.id,"data-id":o.id,index:e.groupIndex,item:o,hiddenPoint:!0,style:Z({...t(Me)(o.attr,e.groupIndex)})},{default:S(()=>[(w(),M(ve(o.chartConfig.chartKey),{class:ie(["edit-content-chart",t(Xe)(o.styles.animations)]),chartConfig:o,themeSetting:t(i),themeColor:t(p),style:Z({...t(_e)(o.attr),...t(Le)(o.styles),...t(Be)(o.styles)})},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","item","style"]))),128))]),_:1},8,["data-id","index","item","class","style"]))]))}}),zt={class:"go-edit-align-line"},qt=ne({__name:"index",setup(e){we(l=>({"2a25621e":t(d)}));const r=ye(),n=oe(),c=je(),s=De({lineArr:["rowt","rowc","rowb","coll","colc","colr"],select:new Map,sorptioned:{x:!1,y:!1}}),u=l=>l?{left:`${l.x?l.x:0}px`,top:`${l.y?l.y:0}px`}:{},d=$(()=>r.getAppTheme),f=$(()=>c.getChartAlignRange),p=$(()=>n.getEditCanvas[te.IS_DRAG]),i=(l,_)=>Math.abs(l-_)<=f.value,y=$(()=>n.getTargetChart.selectId),a=$(()=>n.getComponentList[n.fetchTargetIndex()]),o=$(()=>a.value?.attr||{}),h=$(()=>({id:"0",attr:{w:tt(n.getEditCanvasConfig.width),h:tt(n.getEditCanvasConfig.height),x:0,y:0,offsetX:0,offsetY:0,zIndex:0}}));return ue(()=>n.getMousePosition,V(()=>{try{if(!p.value||y.value.length!==1)return;const l=o.value.w,_=o.value.h,g=o.value.x,O=g+l/2,x=g+l,P=[g,O,x],L=o.value.y,H=L+_/2,U=L+_,q=[L,H,U];s.select.clear(),s.sorptioned.y=!1;const k=n.getComponentList.map(m=>({id:m.id,attr:m.attr}));k.push(h.value),s.lineArr.forEach(m=>{k.forEach(Q=>{if(y.value[0]===Q.id)return;const ce=Q.attr.w,v=Q.attr.h,E=Q.attr.x,A=E+ce/2,ee=E+ce,Ve=[E,A,ee],j=Q.attr.y,ae=j+v/2,re=j+v,Te=[j,ae,re];m.includes("rowt")&&(i(L,j)&&(s.select.set(m,{y:j}),X(a.value,g,j)),i(L,ae)&&(s.select.set(m,{y:ae}),X(a.value,g,ae)),i(L,re)&&(s.select.set(m,{y:re}),X(a.value,g,re))),m.includes("rowc")&&(i(H,j)&&(s.select.set(m,{y:j}),X(a.value,g,j-_/2)),i(H,ae)&&(s.select.set(m,{y:ae}),X(a.value,g,ae-_/2)),i(H,re)&&(s.select.set(m,{y:re}),X(a.value,g,re-_/2))),m.includes("rowb")&&(i(U,j)&&(s.select.set(m,{y:j}),X(a.value,g,j-_)),i(U,ae)&&(s.select.set(m,{y:ae}),X(a.value,g,ae-_)),i(U,re)&&(s.select.set(m,{y:re}),X(a.value,g,re-_))),m.includes("coll")&&(i(g,E)&&(s.select.set(m,{x:E}),X(a.value,E,L)),i(g,A)&&(s.select.set(m,{x:A}),X(a.value,A,L)),i(g,ee)&&(s.select.set(m,{x:ee}),X(a.value,ee,L))),m.includes("colc")&&(i(O,E)&&(s.select.set(m,{x:E}),X(a.value,E-l/2,L)),i(O,A)&&(s.select.set(m,{x:A}),X(a.value,A-l/2,L)),i(O,ee)&&(s.select.set(m,{x:ee}),X(a.value,ee-l/2,L))),m.includes("colr")&&(i(x,E)&&(s.select.set(m,{x:E}),X(a.value,E-l,L)),i(x,A)&&(s.select.set(m,{x:A}),X(a.value,A-l,L)),i(x,ee)&&(s.select.set(m,{x:ee}),X(a.value,ee-l,L)))})})}catch(l){console.log(l)}},200),{deep:!0}),ue(()=>p.value,l=>{l||(s.select.clear(),s.sorptioned.y=!1)}),(l,_)=>(w(),I("div",zt,[(w(!0),I(de,null,ge(s.lineArr,g=>(w(),I("div",{class:ie(["line",[g.includes("row")?"row":"col",s.select.has(g)&&"visible"]]),key:g,style:Z(u(s.select.get(g)))},null,6))),128))]))}});const jt=le(qt,[["__scopeId","data-v-792c43f5"]]),Jt=ne({__name:"index",setup(e){return(r,n)=>{const c=R("n-watermark");return w(),M(c,{id:"go-edit-watermark",content:t(gt),cross:"",selectable:"","font-size":16,"line-height":16,width:500,height:150,"x-offset":12,"y-offset":80,rotate:-15},null,8,["content"])}}});const Vt=le(Jt,[["__scopeId","data-v-15e7d440"]]),ft=e=>(Fe("data-v-fd03a995"),e=e(),ze(),e),Zt=ft(()=>D("div",{class:"select-background"},null,-1)),Qt=ft(()=>D("div",{class:"select-border"},null,-1)),eo=[Zt,Qt],to=ne({__name:"index",setup(e){we(f=>({"3a6a09b6":t(u)}));const r=ye(),n=oe(),{isSelect:c,scale:s}=Ae(n.getEditCanvas),u=$(()=>r.getAppTheme),d=B();return ue(()=>n.getMousePosition,f=>{if(!c.value)return;const{startX:p,startY:i,x:y,y:a}=f,o={zIndex:Qe,x:0,y:0,w:0,h:0,offsetX:0,offsetY:0};y>p&&a>i?(o.x=p,o.y=i,o.w=Math.round((y-p)/s.value),o.h=Math.round((a-i)/s.value)):y>p&&a<i?(o.x=p,o.w=Math.round((y-p)/s.value),o.h=Math.round((i-a)/s.value),o.y=i-o.h):y<p&&a>i?(o.y=i,o.w=Math.round((p-y)/s.value),o.h=Math.round((a-i)/s.value),o.x=p-o.w):(o.w=Math.round((p-y)/s.value),o.h=Math.round((i-a)/s.value),o.x=p-o.w,o.y=i-o.h),d.value={...Me(o,Qe),..._e(o)}},{deep:!0}),(f,p)=>t(c)?(w(),I("div",{key:0,class:"go-edit-select",style:Z(d.value)},eo,4)):he("",!0)}});const oo=le(to,[["__scopeId","data-v-fd03a995"]]),so=ne({__name:"index",setup(e){const r=oe(),{getEditCanvasConfig:n,getEditCanvas:c}=Ae(r),s=$(()=>({w:n.value.width,h:n.value.height})),u=$(()=>{const f={transform:`scale(${c.value.scale})`};return{..._e(s.value),...f}}),d=$(()=>{const f=c.value.isCreate&&{"z-index":99999};return{..._e(s.value),...f}});return(f,p)=>(w(),I("div",{class:"go-edit-range go-transition",style:Z(t(u)),onMousedown:p[0]||(p[0]=i=>t(Kt)(i,void 0))},[We(f.$slots,"default",{},void 0,!0),b(t(Vt)),b(t(jt)),b(t(oo)),D("div",{class:"go-edit-range-model",style:Z(t(d))},null,4)],36))}});const no=le(so,[["__scopeId","data-v-3b7904e3"]]),ao={class:"go-sketch-rule"},ro={key:1,class:"fix-edit-screens-block"},lo=ne({__name:"index",setup(e){we(v=>({"7bf6a890":t(H),"1053983b":t(P),44557576:o.value}));const r=oe(),n=Rt(),c=ye(),s=20;let u=[0,0],d=[0,0];const f=B(),p=B(!0),i=B(),y=B(),a=B(!1),o=B("auto"),{width:h,height:l}=Ae(r.getEditCanvasConfig),_=B(0),g=B(0),O=De({h:[],v:[]}),x=$(()=>r.getEditCanvas.scale),P=$(()=>`${l.value*2}px`),L=$(()=>c.getDarkTheme?{bgColor:"#18181c",longfgColor:"#4d4d4d",shortfgColor:"#4d4d4d",fontColor:"#4d4d4d",shadowColor:"#18181c",borderColor:"#18181c",cornerActiveColor:"#18181c"}:{}),H=$(()=>c.getAppTheme),U=v=>{if(v.ctrlKey||v.metaKey){v.preventDefault();let E=x.value;if(v.wheelDelta>=0&&x.value<2){E=x.value+.05,r.setScale(E);return}v.wheelDelta<0&&x.value>.1&&(E=x.value-.05,r.setScale(E))}},q=()=>{if(!f.value)return;const v=f.value.getBoundingClientRect(),E=i.value.getBoundingClientRect();_.value=(v.left+s-E.left)/x.value,g.value=(v.top+s-E.top)/x.value},k=v=>{if(v.preventDefault(),v.stopPropagation(),v.which==2)a.value=!0;else if(!window.$KeyboardActive?.space)return;document.activeElement?.blur();const E=v.pageX,A=v.pageY,ee=ot(window,"mousemove",j=>{const ae=j.pageX-E,re=j.pageY-A,[Te,xe]=u,[He,be]=d;u=[xe,ae],d=[be,re],f.value.scrollLeft-=xe>Te?Math.abs(xe-Te):-Math.abs(xe-Te),f.value.scrollTop-=be>He?Math.abs(be-He):-Math.abs(be-He)}),Ve=ot(window,"mouseup",()=>{ee(),Ve(),u=[0,0],d=[0,0],a.value=!1})},m=()=>{const v=document.getElementById("go-chart-edit-layout");return v?{height:v.clientHeight-20,width:v.clientWidth-20}:{width:h.value,height:l.value}},Q=()=>{p.value=!1,setTimeout(()=>{p.value=!0},10)},ce=()=>{const{width:v,height:E}=y.value.getBoundingClientRect(),{width:A,height:ee}=m();f.value.scrollLeft=v/2-A/2,f.value.scrollTop=E/2-ee/2};return ue(()=>c.getDarkTheme,()=>{Q()}),ue(()=>x.value,(v,E)=>{E!==v&&n.getRePositionCanvas?(n.setItemUnHandle($t.RE_POSITION_CANVAS,!1),q(),setTimeout(()=>{ce(),Q()},400)):V(Q,20)}),ue(()=>a.value,v=>{o.value=v?"grab":"auto"}),Ge(()=>{f.value&&(f.value.addEventListener("wheel",U,{passive:!1}),ce())}),it(()=>{f.value&&f.value.removeEventListener("wheel",U)}),window.onKeySpacePressHold=v=>{a.value=v},(v,E)=>{const A=R("sketch-rule");return w(),I("div",ao,[p.value?(w(),M(A,{key:0,thick:s,scale:t(x),width:m().width,height:m().height,startX:_.value,startY:g.value,lines:O,palette:t(L)},null,8,["scale","width","height","startX","startY","lines","palette"])):he("",!0),D("div",{ref_key:"$app",ref:f,class:"edit-screens",onScroll:q},[D("div",{ref_key:"$container",ref:y,class:"edit-screen-container",style:Z({width:t(h)*2+"px"})},[D("div",{ref_key:"refSketchRuleBox",ref:i,class:"canvas",onMousedown:k,style:Z({marginLeft:"-"+(m().width/2-25)+"px"})},[D("div",{style:Z({pointerEvents:a.value?"none":"auto"})},[We(v.$slots,"default",{},void 0,!0)],4)],36)],4)],544),t(c).getDarkTheme?(w(),I("div",ro)):he("",!0)])}}});const co=le(lo,[["__scopeId","data-v-ad862b4c"]]),Je=e=>(Fe("data-v-f19379a6"),e=e(),ze(),e),io=Je(()=>D("th",null,"åŠŸèƒ½",-1)),uo=Je(()=>D("th",null,"Win å¿«æ·é”®",-1)),po=Je(()=>D("span",null," Mac å¿«æ·é”® ",-1)),ho={key:0},fo={key:1},_o=ne({__name:"ShortcutKeyModal",props:{modelShow:Boolean},emits:["update:modelShow"],setup(e,{emit:r}){const n=e,{CloseIcon:c}=Se.ionicons5,s=B(!1);ue(()=>n.modelShow,f=>{s.value=f});const u=[{label:"æ‹–æ‹½ç”»å¸ƒ",win:`${Y.SPACE.toUpperCase()} + ðŸ–±ï¸ `,mac:`${K.SPACE.toUpperCase()} + ðŸ–±ï¸ `,macSource:!0},{label:"å‘ ä¸Š/å³/ä¸‹/å·¦ ç§»åŠ¨",win:`${Y.CTRL.toUpperCase()} + â†‘ æˆ– â†’ æˆ– â†“ æˆ– â†`,mac:`${K.CTRL.toUpperCase()} + â†‘ `},{label:"é”å®š",win:`${Y.CTRL.toUpperCase()} + L `,mac:`${K.CTRL.toUpperCase()} + L `},{label:"è§£é”",win:`${Y.CTRL.toUpperCase()} + ${Y.SHIFT.toUpperCase()}+ L `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + L `},{label:"å±•ç¤º",win:`${Y.CTRL.toUpperCase()} + H `,mac:`${K.CTRL.toUpperCase()} + H `},{label:"éšè—",win:`${Y.CTRL.toUpperCase()} + ${Y.SHIFT.toUpperCase()} + H `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + H `},{label:"åˆ é™¤",win:"Delete".toUpperCase(),mac:`${K.CTRL.toUpperCase()} + Backspace `},{label:"å¤åˆ¶",win:`${Y.CTRL.toUpperCase()} + C `,mac:`${K.CTRL.toUpperCase()} + C `},{label:"å‰ªåˆ‡",win:`${Y.CTRL.toUpperCase()} + X `,mac:`${K.CTRL.toUpperCase()} + X `},{label:"ç²˜è´´",win:`${Y.CTRL.toUpperCase()} + V `,mac:`${K.CTRL.toUpperCase()} + V `},{label:"åŽé€€",win:`${Y.CTRL.toUpperCase()} + Z `,mac:`${K.CTRL.toUpperCase()} + Z `},{label:"å‰è¿›",win:`${Y.CTRL.toUpperCase()} + ${Y.SHIFT.toUpperCase()} + Z `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + Z `},{label:"å¤šé€‰",win:`${Y.CTRL.toUpperCase()} + ðŸ–±ï¸ `,mac:`${K.CTRL_SOURCE_KEY.toUpperCase()} + ðŸ–±ï¸ `},{label:"åˆ›å»ºåˆ†ç»„",win:`${Y.CTRL.toUpperCase()} + G / ðŸ–±ï¸ `,mac:`${K.CTRL_SOURCE_KEY.toUpperCase()} + G / ðŸ–±ï¸`},{label:"è§£é™¤åˆ†ç»„",win:`${Y.CTRL.toUpperCase()} + ${Y.SHIFT.toUpperCase()} + G `,mac:`${K.CTRL_SOURCE_KEY.toUpperCase()} + ${Y.SHIFT.toUpperCase()} + G `}],d=()=>{r("update:modelShow",!1)};return(f,p)=>{const i=R("n-icon"),y=R("n-space"),a=R("n-gradient-text"),o=R("n-table"),h=R("n-modal");return w(),M(h,{show:s.value,"onUpdate:show":p[0]||(p[0]=l=>s.value=l),"mask-closable":!0,onAfterLeave:d},{default:S(()=>[b(o,{class:"model-content",bordered:!1,"single-line":!1},{default:S(()=>[D("thead",null,[D("tr",null,[io,uo,D("th",null,[b(y,{justify:"space-between"},{default:S(()=>[po,b(i,{size:"20",class:"go-cursor-pointer",onClick:d},{default:S(()=>[b(t(c))]),_:1})]),_:1})])])]),D("tbody",null,[(w(),I(de,null,ge(u,(l,_)=>D("tr",{key:_},[D("td",null,se(l.label),1),D("td",null,se(l.win),1),l.macSource?(w(),I("td",ho,se(l.mac),1)):(w(),I("td",fo,[b(a,{size:22},{default:S(()=>[fe(se(l.mac.substr(0,1)),1)]),_:2},1024),fe(" + "+se(l.mac.substr(3)),1)]))])),64))])]),_:1})]),_:1},8,["show"])}}});const go=le(_o,[["__scopeId","data-v-f19379a6"]]),vo=e=>(Fe("data-v-f48c63d8"),e=e(),ze(),e),mo={class:"go-edit-shortcut"},Co=vo(()=>D("span",null,"å¿«æ·é”®",-1)),yo=ne({__name:"index",setup(e){const{DicomOverlayIcon:r}=Se.carbon,n=B(!1);return(c,s)=>{const u=R("n-icon"),d=R("n-button"),f=R("n-tooltip");return w(),I("div",mo,[b(go,{modelShow:n.value,"onUpdate:modelShow":s[0]||(s[0]=p=>n.value=p)},null,8,["modelShow"]),b(f,{trigger:"hover"},{trigger:S(()=>[b(d,{class:"scale-btn",secondary:"",size:"small",onClick:s[1]||(s[1]=p=>n.value=!0)},{default:S(()=>[b(u,{size:"21",depth:3},{default:S(()=>[b(t(r))]),_:1})]),_:1})]),default:S(()=>[Co]),_:1})])}}});const wo=le(yo,[["__scopeId","data-v-f48c63d8"]]),So={class:"go-edit-bottom"},To=ne({__name:"index",setup(e){we(g=>({"239051b3":s.value}));const{LockClosedOutlineIcon:r,LockOpenOutlineIcon:n}=Se.ionicons5,c=ye(),s=B(c.getAppTheme),u=oe(),{lockScale:d,scale:f}=Ae(u.getEditCanvas);let p=[{label:"200%",value:200},{label:"150%",value:150},{label:"100%",value:100},{label:"50%",value:50},{label:"è‡ªé€‚åº”",value:0}];const i=B(""),y=g=>{if(g===0){u.computedScale();return}u.setScale(g/100)},a=()=>{u.setEditCanvas(te.LOCK_SCALE,!d.value)},o=B(100),h=g=>`${g}%`,l=g=>{u.setScale(g/100)},_=De({100:""});return yt(()=>{const g=(f.value*100).toFixed(0);i.value=`${g}%`,o.value=parseInt(g)}),(g,O)=>{const x=R("n-text"),P=R("n-space"),L=R("n-select"),H=R("n-icon"),U=R("n-button"),q=R("n-tooltip"),k=R("n-slider");return w(),I("div",So,[b(P,null,{default:S(()=>[b(x,{id:"keyboard-dress-show",depth:"3"})]),_:1}),b(P,{class:"bottom-ri"},{default:S(()=>[b(wo),b(L,{disabled:t(d),class:"scale-btn",value:i.value,"onUpdate:value":[O[0]||(O[0]=m=>i.value=m),y],size:"mini",options:t(p)},null,8,["disabled","value","options"]),b(q,{trigger:"hover"},{trigger:S(()=>[b(U,{onClick:a,text:""},{default:S(()=>[b(H,{class:ie(["lock-icon",{color:t(d)}]),size:"18",depth:2},{default:S(()=>[t(d)?(w(),M(t(r),{key:0})):(w(),M(t(n),{key:1}))]),_:1},8,["class"])]),_:1})]),default:S(()=>[D("span",null,se(t(d)?g.$t("setting.unLock"):g.$t("setting.lock"))+se(g.$t("setting.currentRatio")),1)]),_:1}),b(k,{class:"scale-slider",value:o.value,"onUpdate:value":[O[1]||(O[1]=m=>o.value=m),l],"default-value":50,min:10,max:200,step:5,"format-tooltip":h,disabled:t(d),marks:_},null,8,["value","disabled","marks"])]),_:1})])}}});const xo=le(To,[["__scopeId","data-v-37fce95c"]]),bo=fe("ç³»ç»Ÿè®¾ç½®"),Eo=ne({__name:"index",props:{modelShow:Boolean},emits:["update:modelShow"],setup(e,{emit:r}){const n=e,{HelpOutlineIcon:c,CloseIcon:s}=Se.ionicons5,u=je(),d=B(!1),f=De([{key:pe.ASIDE_ALL_COLLAPSED,value:u.getAsideAllCollapsed,type:"switch",name:"èœå•æŠ˜å ",desc:"é¦–é¡µèœå•æŠ˜å æ—¶éšè—è‡³ç•Œé¢å¤–"},{key:pe.HIDE_PACKAGE_ONE_CATEGORY,value:u.getHidePackageOneCategory,type:"switch",name:"éšè—åˆ†ç±»",desc:"å·¥ä½œç©ºé—´è¡¨å•åˆ†ç±»åªæœ‰å•é¡¹æ—¶éšè—"},{key:pe.CHANGE_LANG_RELOAD,value:u.getChangeLangReload,type:"switch",name:"åˆ‡æ¢è¯­è¨€",desc:"åˆ‡æ¢è¯­è¨€é‡æ–°åŠ è½½é¡µé¢",tip:"è‹¥é‡åˆ°éƒ¨åˆ†åŒºåŸŸè¯­è¨€åˆ‡æ¢å¤±è´¥ï¼Œåˆ™å»ºè®®å¼€å¯"},{key:"divider1",type:"divider",name:"",desc:"",value:""},{key:pe.CHART_TOOLS_STATUS_HIDE,value:u.getChartToolsStatusHide,type:"switch",name:"éšè—å·¥å…·æ ",desc:"é¼ æ ‡ç§»å…¥æ—¶ï¼Œä¼šå±•ç¤ºåˆ‡æ¢åˆ°å±•å¼€æ¨¡å¼"},{key:pe.CHART_TOOLS_STATUS,value:u.getChartToolsStatus,type:"select",name:"å·¥å…·æ å±•ç¤º",desc:"å·¥ä½œç©ºé—´å·¥å…·æ å±•ç¤ºæ–¹å¼",options:[{label:"ä¾§è¾¹æ ",value:$e.ASIDE},{label:"åº•éƒ¨ Dock",value:$e.DOCK}]},{key:"divider0",type:"divider",name:"",desc:"",value:""},{key:pe.CHART_MOVE_DISTANCE,value:u.getChartMoveDistance,type:"number",name:"ç§»åŠ¨è·ç¦»",min:1,step:1,suffix:"px",desc:"å·¥ä½œç©ºé—´æ–¹å‘é”®æŽ§åˆ¶ç§»åŠ¨è·ç¦»"},{key:pe.CHART_ALIGN_RANGE,value:u.getChartAlignRange,type:"number",name:"å¸é™„è·ç¦»",min:10,step:2,suffix:"px",desc:"å·¥ä½œç©ºé—´ç§»åŠ¨å›¾è¡¨æ—¶çš„å¸é™„è·ç¦»"}]);ue(()=>n.modelShow,y=>{d.value=y});const p=()=>{r("update:modelShow",!1)},i=(y,a)=>{u.setItem(a.key,a.value)};return(y,a)=>{const o=R("n-h3"),h=R("n-icon"),l=R("n-space"),_=R("n-divider"),g=R("n-text"),O=R("n-switch"),x=R("n-input-number"),P=R("n-select"),L=R("n-tooltip"),H=R("n-list-item"),U=R("n-list"),q=R("n-modal");return w(),M(q,{show:d.value,"onUpdate:show":a[0]||(a[0]=k=>d.value=k),onAfterLeave:p},{default:S(()=>[b(U,{bordered:"",class:"go-system-setting"},{header:S(()=>[b(l,{justify:"space-between"},{default:S(()=>[b(o,{class:"go-mb-0"},{default:S(()=>[bo]),_:1}),b(h,{size:"20",class:"go-cursor-pointer",onClick:p},{default:S(()=>[b(t(s))]),_:1})]),_:1})]),default:S(()=>[(w(!0),I(de,null,ge(f,k=>(w(),M(H,{key:k.key},{default:S(()=>[k.type==="divider"?(w(),M(_,{key:0,style:{margin:"0"}})):(w(),M(l,{key:1,size:40},{default:S(()=>[b(l,null,{default:S(()=>[b(g,{class:"item-left"},{default:S(()=>[fe(se(k.name),1)]),_:2},1024),k.type==="switch"?(w(),M(O,{key:0,value:k.value,"onUpdate:value":[m=>k.value=m,m=>i(m,k)],size:"small"},null,8,["value","onUpdate:value"])):k.type==="number"?(w(),M(x,{key:1,value:k.value,"onUpdate:value":[m=>k.value=m,m=>i(m,k)],class:"input-num-width",size:"small",step:k.step||null,suffix:k.suffix||null,min:k.min||0},null,8,["value","onUpdate:value","step","suffix","min"])):k.type==="select"?(w(),M(P,{key:2,class:"select-min-width",value:k.value,"onUpdate:value":[m=>k.value=m,m=>i(m,k)],size:"small",options:k.options},null,8,["value","onUpdate:value","options"])):he("",!0)]),_:2},1024),b(l,null,{default:S(()=>[b(g,{class:"item-right"},{default:S(()=>[fe(se(k.desc),1)]),_:2},1024),k.tip?(w(),M(L,{key:0,trigger:"hover"},{trigger:S(()=>[b(h,{size:"21"},{default:S(()=>[b(t(c))]),_:1})]),default:S(()=>[D("span",null,se(k.tip),1)]),_:2},1024)):he("",!0)]),_:2},1024)]),_:2},1024))]),_:2},1024))),128))]),_:1})]),_:1},8,["show"])}}});const ko=le(Eo,[["__scopeId","data-v-fa104537"]]),rt=oe(),Lo=()=>{rt.setTargetSelectChart(void 0),Mt(vt(rt.getStorageInfo||[]),void 0,"json")},Ro=()=>{const e=B(),{updateComponent:r}=dt();return{importUploadFileListRef:e,importBeforeUpload:({file:s})=>{e.value=[];const u=s.file.type;return u!==st.JSON&&u!==st.TXT?(window.$message.warning("ä»…æ”¯æŒä¸Šä¼  ã€JSONã€‘ æ ¼å¼æ–‡ä»¶ï¼Œè¯·é‡æ–°ä¸Šä¼ ï¼"),!1):!0},importCustomRequest:s=>{const{file:u}=s;wt(()=>{u.file?Dt(u.file).then(d=>{kt({message:"è¯·é€‰æ‹©å¯¼å…¥æ–¹å¼:",positiveText:"æ–°å¢žï¼ˆå¯æ’¤å›žï¼‰",negativeText:"è¦†ç›–ï¼ˆä¸å¯æ’¤å›žï¼‰",negativeButtonProps:{type:"info",ghost:!1},onPositiveCallback:async()=>{try{d=Ke(d),await r(d,!1,!0),window.$message.success("å¯¼å…¥æˆåŠŸï¼")}catch(f){console.log(f),window.$message.error("ç»„ä»¶å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§!")}},onNegativeCallback:async()=>{try{d=Ke(d),await r(d,!0,!0),window.$message.success("å¯¼å…¥æˆåŠŸï¼")}catch(f){console.log(f),window.$message.error("ç»„ä»¶å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§!")}}})}):window.$message.error("å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®æˆ–è”ç³»ç®¡ç†å‘˜ï¼")})}}},{updateComponent:$o}=dt(),Mo=oe(),Do=()=>{const e=u=>$o(u.detail,!0,!1),r=async()=>{dispatchEvent(new CustomEvent(Oe.CHART,{detail:Mo.getStorageInfo}))},n=()=>{addEventListener("blur",r),addEventListener(Oe.JSON,e)},c=()=>{removeEventListener(Oe.JSON,e),removeEventListener("blur",r)};return(u,d)=>{d==et.CHART_HOME_NAME&&c(),u==et.CHART_HOME_NAME&&n()}},Ao=()=>{const e=ut();ue(()=>e.name,Do(),{immediate:!0})};var Ce=(e=>(e.BUTTON="button",e.IMPORTUPLOAD="importUpload",e))(Ce||{});const Ho={class:"btn-item"},Uo=ne({__name:"index",setup(e){const{t:r}=mt.global,{DownloadIcon:n,ShareIcon:c,PawIcon:s,SettingsSharpIcon:u}=Se.ionicons5,d=je();oe(),ut(),Ao();let f=null;const p=B(!1),i=B(!0),y=B(!0),{importUploadFileListRef:a,importCustomRequest:o,importBeforeUpload:h}=Ro(),l=$(()=>d.getChartToolsStatus===$e.ASIDE),_=$(()=>d.getChartToolsStatusHide),g=$(()=>i.value&&_.value),O=$(()=>{if(!l.value)return L;const H=[];return L.map(U=>{H.unshift(U)}),H}),x=()=>{f=setTimeout(()=>{i.value&&(i.value=!1,y.value=!0)},200),setTimeout(()=>{y.value=!1},400)},P=()=>{clearTimeout(f),i.value||(i.value=!0)},L=[{key:"import",type:Ce.IMPORTUPLOAD,name:r("setting.import"),icon:c},{key:"export",type:Ce.BUTTON,name:r("setting.export"),icon:n,handle:Lo}];return(H,U)=>{const q=R("n-icon"),k=R("n-text"),m=R("n-button"),Q=R("n-upload"),ce=R("n-tooltip");return w(),I(de,null,[D("div",{class:ie(["go-chart-edit-tools",[t(d).getChartToolsStatus,t(g)?"isMini":"unMini"]]),onClick:U[1]||(U[1]=v=>i.value&&(i.value=!1)),onMouseenter:x,onMouseleave:P},[Pe(b(q,{class:"asideLogo",size:"22"},{default:S(()=>[b(t(s))]),_:1},512),[[Ye,t(d).getChartToolsStatus===t($e).ASIDE&&t(g)]]),(w(!0),I(de,null,ge(t(O),(v,E)=>(w(),M(ce,{key:v.key,disabled:!t(l)||t(_)&&y.value,trigger:"hover",placement:"left"},{trigger:S(()=>[D("div",Ho,[v.type===t(Ce).BUTTON?(w(),M(m,{key:0,circle:t(l),secondary:"",onClick:v.handle},{icon:S(()=>[t(l)?(w(),M(q,{key:0,size:"22"},{default:S(()=>[(w(),M(ve(v.icon)))]),_:2},1024)):(w(),M(ve(v.icon),{key:1}))]),default:S(()=>[Pe(b(k,{depth:"3"},{default:S(()=>[fe(se(v.name),1)]),_:2},1536),[[Ye,!t(l)]])]),_:2},1032,["circle","onClick"])):v.type===t(Ce).IMPORTUPLOAD?(w(),M(Q,{key:1,"file-list":t(a),"onUpdate:file-list":U[0]||(U[0]=A=>St(a)?a.value=A:null),"show-file-list":!1,customRequest:t(o),onBeforeUpload:t(h)},{default:S(()=>[b(m,{circle:t(l),secondary:""},{icon:S(()=>[t(l)?(w(),M(q,{key:0,size:"22"},{default:S(()=>[(w(),M(ve(v.icon)))]),_:2},1024)):(w(),M(ve(v.icon),{key:1}))]),default:S(()=>[Pe(b(k,{depth:"3"},{default:S(()=>[fe(se(v.name),1)]),_:2},1536),[[Ye,!t(l)]])]),_:2},1032,["circle"])]),_:2},1032,["file-list","customRequest","onBeforeUpload"])):he("",!0)])]),default:S(()=>[D("span",null,se(v.name),1)]),_:2},1032,["disabled"]))),128))],34),b(t(ko),{modelShow:p.value,"onUpdate:modelShow":U[2]||(U[2]=v=>p.value=v)},null,8,["modelShow"])],64)}}});const Oo=le(Uo,[["__scopeId","data-v-56bed784"]]),Io=ne({__name:"index",setup(e){const r=oe(),{handleContextMenu:n}=qe();At();const{mouseenterHandle:c,mouseleaveHandle:s,mousedownHandle:u,mouseClickHandle:d}=ht(),f=(a,o,h)=>{if(r.getTargetChart.selectId.length>1)return o.filter(_=>[T.GROUP,T.DELETE].includes(_.key));const l=[];return h.status.lock?l.push(T.LOCK):l.push(T.UNLOCK),h.status.hide?l.push(T.HIDE):l.push(T.SHOW),a.filter(_=>!l.includes(_.key))},p=$(()=>r.getEditCanvasConfig.chartThemeSetting),i=$(()=>{const a=r.getEditCanvasConfig.chartThemeColor;return lt[a]});$(()=>r.getEditCanvasConfig.filterShow);const y=$(()=>{const a=r.getEditCanvasConfig.background,o=r.getEditCanvasConfig.backgroundImage;return{...r.getEditCanvasConfig.selectColor?{background:a||void 0}:{background:`url(${o}) no-repeat center center / cover !important`},width:"inherit",height:"inherit"}});return Ge(()=>{It()}),(a,o)=>(w(),M(t(Lt),{id:"go-chart-edit-layout",flex:!0,showTop:!1,showBottom:!0,depth:1,xScroll:!0,disabledScroll:!0,onMousedown:t(pt),onDrop:t(Yt),onDragover:t(at),onDragenter:t(at)},{aside:S(()=>[b(t(Oo))]),bottom:S(()=>[b(t(xo))]),default:S(()=>[b(t(co),null,{default:S(()=>[D("div",{id:"go-chart-edit-content",onContextmenu:o[0]||(o[0]=(...h)=>t(n)&&t(n)(...h))},[b(t(no),null,{default:S(()=>[D("div",{style:Z({...t(Le)(t(r).getEditCanvasConfig),...t(y)})},[(w(!0),I(de,null,ge(t(r).getComponentList,(h,l)=>(w(),I("div",{key:h.id},[h.isGroup?(w(),M(t(Ft),{key:0,groupData:h,groupIndex:l},null,8,["groupData","groupIndex"])):(w(),M(t(Ne),{key:1,"data-id":h.id,index:l,style:Z({...t(Me)(h.attr,l),...t(ct)(h.styles)}),item:h,onClick:_=>t(d)(_,h),onMousedown:_=>t(u)(_,h),onMouseenter:_=>t(c)(_,h),onMouseleave:_=>t(s)(_,h),onContextmenu:_=>t(n)(_,h,f)},{default:S(()=>[(w(),M(ve(h.chartConfig.chartKey),{class:ie(["edit-content-chart",t(Xe)(h.styles.animations)]),chartConfig:h,themeSetting:t(p),themeColor:t(i),style:Z({...t(_e)(h.attr),...t(Le)(h.styles),...t(Be)(h.styles),overflow:h.chartConfig.chartKey=="VIHLine"||h.chartConfig.chartKey=="VIFHLine"?"visible":"hidden"})},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","style","item","onClick","onMousedown","onMouseenter","onMouseleave","onContextmenu"]))]))),128))],4)]),_:1})],32)]),_:1})]),_:1},8,["onMousedown","onDrop","onDragover","onDragenter"]))}});const Zo=le(Io,[["__scopeId","data-v-c507cb57"]]);export{Zo as default};
